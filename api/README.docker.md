# Docker Setup for Premium Calculation API

This document explains how to run the Premium Calculation API using Docker.

## Prerequisites

- Docker installed on your system
- Docker Compose installed on your system

## Running with Docker Compose

The easiest way to run the API is using Docker Compose:

```bash
# Build and start the container
docker-compose up -d

# View logs
docker-compose logs -f

# Stop the container
docker-compose down
```

The API will be available at http://localhost:3000

## Running with Docker directly

If you prefer to use Docker commands directly:

```bash
# Build the Docker image
docker build -t premium-calc-api .

# Run the container
docker run -p 3000:3000 -d \
  -v $(pwd)/data:/usr/src/app/data \
  -v $(pwd)/../data_files:/usr/src/app/data_files \
  --name premium-calc-api \
  premium-calc-api
```

## API Endpoints

Once running, you can access:

- API documentation: http://localhost:3000/api-docs
- Generate sample data: GET http://localhost:3000/api/generate-sample-data
- Calculate premium: POST http://localhost:3000/api/calculate-premium
- Debug product lookup: GET http://localhost:3000/api/debug-product/H0A

## Data Persistence

The Docker setup includes volume mounts for:

1. `./data`: Where the API stores Excel files generated by the sample data endpoint
2. `../data_files`: Access to business Excel files from the parent directory

## Troubleshooting

If you encounter issues:

1. Check container logs: `docker-compose logs` or `docker logs premium-calc-api`
2. Verify the data directories exist and have proper permissions
3. Ensure ports are not already in use on your host machine